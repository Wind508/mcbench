{% extends "base.html" %}
{% block extrahead %}
<style>
.benchmark .title { font-size: 1.8em; }
.benchmark .author { font-size: 0.9em; margin-left: 5px; }
.benchmark .tags { font-size: 0.9em; }
.benchmark hr { margin: 0 auto 10px auto; }
</style>
{% endblock %}

{% block content %}
<div class="container">
  <div class="row">
    <div class="span12">
{% with query = request.values.get('query', '') %}
  {% if not query %}
  <h3>Found {{ benchmarks|length }} benchmark{{ benchmarks|length|pluralize }}.</h3>
  {% else %}
  <h3>Found {{ num_matches }} occurrence{{ num_matches|pluralize }} of {{ query }}
      across {{ benchmarks|length }} benchmark{{ benchmarks|length|pluralize }}
      ({{ '%.2f seconds'|format(elapsed_time) }}).</h3>

  <form method="post" action="{{ url_for('save_query') }}" class="form-inline">
    <input name="name" type="text" class="form-control input-small"
           placeholder="Name this query" style="width: 20%;" />
    <input name="xpath" type="hidden" value="{{ query }}" />
    <button type="submit" class="btn btn-default btn-small">Save</button>
  </form>
  {% endif %}
    {% for benchmark in benchmarks %}
    <div class="benchmark">
      <p>
      <span class="title"><a href="{{ url_for('benchmark', name=benchmark.name, query=query) }}">{{ benchmark.title }}</a>
      {% if query %}
        {% with matches = matches_by_benchmark[benchmark.name] %}
          ({{ matches }} occurrence{{ matches|pluralize }})
        {% endwith %}
      {% endif %}
      </span>
      <span class="author">from <a href="{{ benchmark.author_url }}">{{ benchmark.author }}</a></span>
      </p>
      <hr>
      <p class="summary">{{ benchmark.summary }}</p>
      <p class="tags">tagged {{ benchmark.tags|join(', ') }}</p>
    </div>
    {% endfor %}
  </div>
{% endwith %}
</div>
{% endblock %}
